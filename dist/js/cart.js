$(function(){$.get("http://jx.xuzhixiang.top/ap/api/cart-list.php",{id:1002876}).then(e=>{console.log(e);var i=e.data;let t="";console.log(i);for(let e=0;e<i.length;e++)t+=`
         <li id="list">
             <input type="checkbox" name="" class="single">
             <img src="${i[e].pimg}" alt="">
             <span>${i[e].pname}</span>
             <span class="price">${i[e].pprice}</span>
             <span class="minus">-</span>
             <input type="text" class="num" pid="${i[e].pid}" uid="${i[e].uid}" value="${i[e].pnum}">
             <span class="plus">+</span>
             <span class="siglePrice">${i[e].pprice*i[e].pnum}</span>
             <p class="del">X</p>
         </li>
         `;$(".cart-product").html(t),$(".plus").click(function(){var e=$(this).siblings(".num").val();$(this).siblings(".num").val(++e);var i=$(this).siblings(".price").text();$(this).siblings(".siglePrice").text(i*e);var t=$(this).siblings(".num").attr("uid"),i=$(this).siblings(".num").attr("pid");$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:t,pid:i,pnum:e},e=>{console.log(e);let i=0,t=0;for(let e=0;e<s.length;e++)s[e].checked&&(i++,console.log(s[e]),t+=Number($(".single").eq(e).siblings(".siglePrice").text()));$(".heji").text(t)})}),$(".minus").click(function(){let e=$(this).siblings(".num").val();e<=1?$(this).siblings(".num").val(1):$(this).siblings(".num").val(--e);var i=$(this).siblings(".price").text();$(this).siblings(".siglePrice").text(i*e);var t=$(this).siblings(".num").attr("uid"),i=$(this).siblings(".num").attr("pid");$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:t,pid:i,pnum:e},e=>{console.log(e);let i=0,t=0;for(let e=0;e<s.length;e++)s[e].checked&&(i++,console.log(s[e]),t+=Number($(".single").eq(e).siblings(".siglePrice").text()));$(".heji").text(t)})}),$(".num").change(function(){var e=$(this).val(),i=$(this).siblings(".price").text();$(this).siblings(".siglePrice").text(i*e);var t=$(this).attr("uid"),i=$(this).attr("pid");$.get("http://jx.xuzhixiang.top/ap/api/cart-update-num.php",{uid:t,pid:i,pnum:e},e=>{console.log(e);let i=0,t=0;for(let e=0;e<s.length;e++)s[e].checked&&(i++,console.log(s[e]),t+=Number($(".single").eq(e).siblings(".siglePrice").text()));$(".heji").text(t)})}),$(".del").click(function(){var e=$(this).siblings(".num").attr("uid"),i=$(this).siblings(".num").attr("pid");$(this).parent().remove(),$.get("http://jx.xuzhixiang.top/ap/api/cart-delete.php",{uid:e,pid:i},e=>{console.log(e);let i=0,t=0;for(let e=0;e<s.length;e++)s[e].checked&&(i++,console.log(s[e]),t+=Number($(".single").eq(e).siblings(".siglePrice").text()));$(".heji").text(t)})});let l=document.querySelectorAll("#checkAll"),s=document.querySelectorAll(".single");var n=document.querySelectorAll("#list");l[0].onclick=()=>{for(let e=0;e<s.length;e++)s[e].checked=l[0].checked;let i=0,t=0;for(let e=0;e<s.length;e++)s[e].checked&&(i++,console.log(s[e]),t+=Number($(".single").eq(e).siblings(".siglePrice").text()));$(".heji").text(t)};for(let i=0;i<n.length;i++){s[i].onclick=()=>{let i=0,t=0;for(let e=0;e<s.length;e++)s[e].checked&&(i++,console.log(s[e]),t+=Number($(".single").eq(e).siblings(".siglePrice").text()));$(".heji").text(t),i===s.length?l[0].checked=!0:l[0].checked=!1;let e=document.querySelector("#xuan");e.innerText=i};let e=document.querySelector("#gong");e.innerText=n.length}})});